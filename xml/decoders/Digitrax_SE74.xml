<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../XSLT/decoder.xsl"?>
<decoder-config xmlns:xi="http://www.w3.org/2001/XInclude"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xsi:noNamespaceSchemaLocation="http://jmri.org/xml/schema/decoder-4-15-2.xsd"
                showEmptyPanes="no"
                suppressFunctionLabels="yes"
                suppressRosterMedia="yes"
                >

    <version author="Bob Jacobsen" version="1" lastUpdated="20230205" />
    <version author="Bob Jacobsen and Bob Milhaupt" version="2" lastUpdated="20230925" />

    <decoder>

        <family name="Series 7 Accessory Devices" mfg="Digitrax">
            <model model="SE74"/>
        </family>

        <programming direct="no" paged="yes" register="no" ops="no"><!-- paged yes allows initial setup and change of address -->
            <mode>LOCONETBD7OPSWMODE</mode>
        </programming>

        <variables>
          <!-- Needed to set the "Base Address" value. May be set when creating 
            the initial roster entry.  May not be modified after creation! -->
          <variable CV="1,2" comment="Base address" item="Long Address" default="1" infoOnly="yes">
            <splitVal highCV="2" min="1" max="2045"/>
            <label>Base Address</label>
          </variable>

          <variable CV="7" item="Decoder Version" readOnly="yes" default="112">
            <decVal/>
            <label>Version ID</label>
            <label xml:lang="it">Versione Decoder: </label>
            <label xml:lang="fr">Version d√©codeur: </label>
            <label xml:lang="de">Decoder Version: </label>
          </variable>
          <variable CV="8" readOnly="yes" item="Manufacturer" default="129">
            <decVal/>
            <label>Manufacturer ID</label>
            <label xml:lang="it">ID Costruttore: </label>
            <label xml:lang="fr">ID constructeur: </label>
            <label xml:lang="de">Hersteller ID: </label>
          </variable>
         
          <variable item="Serial Number" CV="9,10" readOnly="yes">
            <splitVal highCV="10"/>
            <label>Serial Number</label>
          </variable>
  
          <variable CV="11" item="Turnout Type" default="0"
                tooltip="OpSw01" mask="XXXXXXXV">
            <enumVal>
              <enumChoice>
                <choice>Pulse/Solenoid Turnouts</choice>
              </enumChoice>
              <enumChoice>
                <choice>Slow Motion Turnouts</choice>
              </enumChoice>
            </enumVal>
            <label>Turnout Type is</label>
          </variable>

          <variable CV="11" item="Control Mode" default="0"
                tooltip="OpSw05" mask="XXXVXXXX">
            <enumVal>
              <enumChoice>
                <choice>Switch Command Mode</choice>
              </enumChoice>
              <enumChoice>
                <choice>DCC Aspect Control Mode</choice>
              </enumChoice>
            </enumVal>
            <label>Control Mode is</label>
          </variable>

          <variable CV="11" item="Internal Routes" default="0"
                tooltip="OpSw06" mask="XXVXXXXX">
            <enumVal>
              <enumChoice>
                <choice>enabled</choice>
              </enumChoice>
              <enumChoice>
                <choice>disabled</choice>
              </enumChoice>
            </enumVal>
            <label>Internal Routes are</label>
          </variable>

          <variable CV="12" item="Bushby" default="0"
                tooltip="OpSw10" mask="XXXXXXVX">
            <enumVal>
              <enumChoice>
                <choice>disabled</choice>
              </enumChoice>
              <enumChoice>
                <choice>enabled</choice>
              </enumChoice>
            </enumVal>
            <label>Bushby Bit is</label>
          </variable>

          <variable CV="12" item="Input Lines" default="0"
                tooltip="OpSw11" mask="XXXXXVXX">
            <enumVal>
              <enumChoice>
                <choice>control turnouts and provide sensor inputs</choice>
              </enumChoice>
              <enumChoice>
                <choice>trigger routes</choice>
              </enumChoice>
            </enumVal>
            <label>Input Lines</label>
          </variable>

          <variable CV="12" item="Command Source" default="0"
                tooltip="OpSw14" mask="XXVXXXXX">
            <enumVal>
              <enumChoice>
                <choice>Loconet switch commands</choice>
              </enumChoice>
              <enumChoice>
                <choice>DCC switch commands only</choice>
              </enumChoice>
            </enumVal>
            <label>Command source is</label>
          </variable>

          <variable CV="12" item="Route Echo" default="0"
                tooltip="OpSw15" mask="XVXXXXXX">
            <enumVal>
              <enumChoice>
                <choice>echo to Loconet</choice>
              </enumChoice>
              <enumChoice>
                <choice>do not echo to Loconet</choice>
              </enumChoice>
            </enumVal>
            <label>Route Switch Commands</label>
          </variable>

          <variable CV="13" item="Solenoid Pulse" default="0"
                tooltip="OpSw16" mask="XXXXXXXV">
            <enumVal>
              <enumChoice>
                <choice>normal</choice>
              </enumChoice>
              <enumChoice>
                <choice>high CD voltage</choice>
              </enumChoice>
            </enumVal>
            <label>Solenoid Pulse</label>
          </variable>

          <variable CV="14" item="SW Messages" default="0"
                tooltip="OpSw30" mask="XVXXXXXX">
            <enumVal>
              <enumChoice>
                <choice>normal B0 format</choice>
              </enumChoice>
              <enumChoice>
                <choice>special B2 format</choice>
              </enumChoice>
            </enumVal>
            <label>For switch messages, send</label>
          </variable>

          <variable CV="15" item="LED Type" default="0"
          tooltip="OpSws 33-35: LED Type and wiring"
                    mask="XXXXXVVV">
            <enumVal>
              <enumChoice>
                <choice>Bi-color, 3-wire LEDs, common anode</choice>
              </enumChoice>
              <enumChoice>
                <choice>Bi-color, 2-wire LEDs, common anode</choice>
              </enumChoice>
              <enumChoice>
                <choice>Three separate LEDs, common anode</choice>
              </enumChoice>
              <enumChoice>
                <choice>Reserved (3)</choice>
              </enumChoice>
              <enumChoice>
                <choice>Bi-color, 3-wire LEDs, common cathode</choice>
              </enumChoice>
              <enumChoice>
                <choice>Bi-color, 2-wire LEDs, common cathode</choice>
              </enumChoice>
              <enumChoice>
                <choice>Three separate LEDs, common cathode</choice>
              </enumChoice>
              <enumChoice>
                <choice>Reserved (7)</choice>
              </enumChoice>
            </enumVal>
          </variable>

          <variable CV="15" item="Fourth Aspect" default="0"
                tooltip="OpSw37,36" mask="XXXVVXXX">
            <enumVal>
              <enumChoice>
                <choice>flashing yellow</choice>
              </enumChoice>
              <enumChoice>
                <choice>dark</choice>
              </enumChoice>
              <enumChoice>
                <choice>flashing red</choice>
              </enumChoice>
              <enumChoice>
                <choice>flashing green</choice>
              </enumChoice>
            </enumVal>
            <label>Fourth aspect is</label>
          </variable>

          <variable CV="15" item="1021 Broadcast" default="0"
                tooltip="OpSw38" mask="XXVXXXXX">
            <enumVal>
              <enumChoice>
                <choice>enabled</choice>
              </enumChoice>
              <enumChoice>
                <choice>disabled</choice>
              </enumChoice>
            </enumVal>
            <label>SW1021/2022 signal broadcast: </label>
          </variable>

          <variable CV="16" item="Lunar" default="0"
                tooltip="OpSw41" mask="XXXXXXXV">
            <enumVal>
              <enumChoice>
                <choice>not persistent</choice>
              </enumChoice>
              <enumChoice>
                <choice>persistent</choice>
              </enumChoice>
            </enumVal>
            <label>Lunar Aspects are</label>
          </variable>

        </variables>
        <resets>
            <factReset label="Restart Board" CV="8" default="0">
                <label>Restart Board</label>
            </factReset>
            <factReset label="Reset All CVs" CV="15" default="128">
                <label>Reset All CVs</label>
            </factReset>
        </resets>
    </decoder>
  <pane xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="http://jmri.org/xml/schema/programmer.xsd">
    <name>CVs</name>
    <column>
        <row>
            <cvtable/>
        </row>
        <row>
            <column>
                <label>
                    <text>&lt;html&gt;The "CV" column in the table above shows CV
                        numbers, not the Op Switch number.  &lt;p&gt;To see those, hover
                        your mouse over a variable on the OpSw Settings pane.
                        &lt;p&gt;&lt;p&gt;The top-most row above reflects the 'Base
                        Address' configured on the "Basic" sheet.
                    </text>
                </label>
                <label>
                    <text> </text>
                </label>
            </column>
        </row>
    </column>
  </pane>
  <pane>
      <name>Basic</name>
      <column>
          <display item="Long Address"/>
          <label>
              <text> </text>
          </label>

          <label>
            <text>&lt;html&gt;&lt;p&gt;
                &lt;p&gt;When programming with this roster entry, it is important to
                ensure that &lt;strong&gt;only ONE&lt;/strong&gt; 7th-generation LocoNet
                device uses this &lt;p&gt;base address!
            &lt;/html&gt;</text>
          </label>          <label>
            <text>&lt;html&gt;&lt;p&gt;
                &lt;p&gt;This roster entry will only access the specified
                board if the Base Address (i.e. Board ID, board address, etc.), specified above,
                &lt;br&gt;was correctly entered when the roster entry was first created.
                You cannot change it here.
                &lt;p&gt;Note that some Digitrax documentation refers
                to Base Address, while other documentation refers to
                &lt;p&gt;Board Address or Board ID.  These are equivalent concepts.
            &lt;/html&gt;</text>
          </label>
          <label>
              <text> </text>
          </label>
          <display item="Serial Number"/>
      </column>
  </pane>

    <pane>
        <name>Signaling Configuration</name>
        <column>
            <label><text>&lt;html&gt;&lt;span style=&quot;color: black;&quot;&gt;&lt;h2&gt;&lt;strong&gt;Operating Mode&lt;/strong&gt;&lt;/h2&gt;&lt;/html&gt;</text></label>
            <display item="Control Mode"/>
            <label><text>&lt;html&gt;&lt;span style=&quot;color: black;&quot;&gt;&lt;h2&gt;&lt;strong&gt;Signal Head Characteristics&lt;/strong&gt;&lt;/h2&gt;&lt;/html&gt;</text></label>
            <display item="LED Type"/>
            <display item="Fourth Aspect"/>
            <label>
                <text>&lt;html&gt;Fourth aspect is only for "SE8C-mode" signaling.  Typically,&lt;p&gt;
                    JMRI uses the "dark" appearance when using SE8C&lt;p&gt;mode.</text>
            </label>
            <display item="Lunar"/>
        </column>
    </pane>
    
    <pane>
        <name>Other Settings</name>
        <column>            
        <label><text>&lt;html&gt;&lt;span style=&quot;color: black;&quot;&gt;&lt;h2&gt;&lt;strong&gt;LocoNet Characteristics&lt;/strong&gt;&lt;/h2&gt;&lt;/html&gt;</text></label>
            <display item="Bushby"/>
            <display item="Command Source"/>
            <display item="SW Messages"/>
            <display item="1021 Broadcast"/>
            <label><text>&lt;html&gt;&lt;span style=&quot;color: black;&quot;&gt;&lt;h2&gt;&lt;strong&gt;Inputs Characteristics&lt;/strong&gt;&lt;/h2&gt;&lt;/html&gt;</text></label>
            <display item="Input Lines"/>
            <display item="Internal Routes"/>
            <display item="Route Echo"/>
            <label><text>&lt;html&gt;&lt;span style=&quot;color: black;&quot;&gt;&lt;h2&gt;&lt;strong&gt;Outputs Characteristics&lt;/strong&gt;&lt;/h2&gt;&lt;/html&gt;</text></label>
            <display item="Turnout Type"/>
            <display item="Solenoid Pulse"/>
        </column>
    </pane>
  <pane>
      <name>Notes</name>
      <column>
        <label><text>&lt;html&gt;&lt;span style=&quot;color: black;&quot;&gt;
            &lt;h2&gt;&lt;strong&gt;Notes on SE74 Roster Entries and Programming
            &lt;/strong&gt;&lt;/h2&gt;&lt;/html&gt;</text>
        </label>
        <label>
            <text>&lt;html&gt;&lt;/strong&gt;&lt;ul&gt;
                &lt;li&gt;
                This roster entry uses the "Extended Accessory Decoder CV" method 
                &lt;p&gt;to access the SE74's "OpSw"s.  This is effectively the same as 
                &lt;p&gt;is described in the SE74 instruction in the "Program SE74 CVs 
                &lt;p&gt;on LocoNet" section.
                &lt;/li&gt;
                &lt;li&gt;
                The SE74 Roster entry has no ability to change the entry's "Base Address".
                &lt;p&gt;Use the mechanisms shown in the SE74's Manual for Digitrax' suggestions
                &lt;p&gt;for changing the Base Address.
                &lt;/li&gt;
                &lt;li&gt;
                Because the SE74 in "SE8C signalling mode" uses a large number of Turnout
                &lt;p&gt;addresses, and because that mode requires the use of repetitive Turnout
                &lt;p&gt;messages to "flash" its outputs, JMRI recommends use of the SE74 "Aspect
                &lt;p&gt;signaling mode". The Aspect mode uses a different "addressing space"
                &lt;p&gt;than "Turnouts", and does not stress the LocoNet with flashing aspects.
                &lt;/li&gt;
                &lt;li&gt;
                The SE74 uses four Turnout addresses for its switch machines, and when
                &lt;p&gt;in the "SE8C signaling mode", it uses 32 turnouts.  It also uses several
                &lt;p&gt;other Turnouts for "broadcast" purposes.  These are always at fixed 
                &lt;p&gt;addresses, and should be avoided.  The "broadcast" addresses include 
                &lt;p&gt;1021, 1022, 1023, 1024, 2041, 2024, 2043, 2044, and 2048. 
                &lt;/li&gt;
                &lt;li&gt;
                The SE74 controls signals at the "Signal Head" level, whether used in 
                &lt;p&gt;"SE8C Signaling mode" or "Aspect Signaling mode".  JMRI supports 
                &lt;p&gt;the "SE8C 4 Aspect" Signal Head, which can be used when the SE74 is in 
                &lt;p&gt;"SE8C Signaling mode", and "DCC Signal Decoder" Signal Head when the 
                &lt;p&gt;SE74 is in "Aspect Signaling mode".
                &lt;/li&gt;
                &lt;li&gt;
                This Roster does not support configuratin of the SE74 "Routes" feature.
                &lt;p&gt;Use the Digitrax-supported Routes programming features.
                &lt;/li&gt;
            &lt;/ul&gt;&lt;/html&gt;</text>
        </label>
      </column>
  </pane>
</decoder-config>
